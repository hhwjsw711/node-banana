---
phase: 19-type-refactoring
plan: 02
type: execute
---

<objective>
Extract remaining types (provider, workflow, API, model) and clean up index.ts to be a pure re-export hub.

Purpose: Complete the types refactoring by organizing all remaining types into domain files.
Output: New providers.ts, workflow.ts, api.ts, models.ts files with index.ts as re-export hub only.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

**Prior plan in this phase:**
@.planning/phases/19-type-refactoring/19-01-SUMMARY.md

**Files being refactored:**
@src/types/index.ts
@src/types/nodes.ts
@src/types/annotation.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Extract provider types to providers.ts</name>
  <files>src/types/providers.ts, src/types/index.ts</files>
  <action>
Create src/types/providers.ts containing:

**Types to move:**
- ProviderType
- SelectedModel
- ProviderConfig
- ProviderSettings
- LLMProvider
- LLMModelType

Update index.ts to re-export from ./providers.
  </action>
  <verify>npx tsc --noEmit</verify>
  <done>providers.ts exists with all provider types, index.ts re-exports them</done>
</task>

<task type="auto">
  <name>Task 2: Extract workflow and model types</name>
  <files>src/types/workflow.ts, src/types/models.ts, src/types/index.ts</files>
  <action>
Create src/types/workflow.ts containing:
- WorkflowEdge, WorkflowEdgeData
- WorkflowSaveConfig, WorkflowCostData
- NodeGroup, GroupColor

Create src/types/models.ts containing:
- AspectRatio, Resolution, ModelType
- ModelInputDef (if not in nodes.ts)

Update index.ts to re-export from both files.
  </action>
  <verify>npx tsc --noEmit</verify>
  <done>workflow.ts and models.ts exist, index.ts re-exports them</done>
</task>

<task type="auto">
  <name>Task 3: Extract API types and finalize index.ts</name>
  <files>src/types/api.ts, src/types/index.ts</files>
  <action>
Create src/types/api.ts containing:
- GenerateRequest, GenerateResponse
- LLMGenerateRequest, LLMGenerateResponse

Finalize index.ts to be a pure re-export hub:
```typescript
// Domain re-exports
export * from './nodes';
export * from './annotation';
export * from './providers';
export * from './workflow';
export * from './models';
export * from './api';
export * from './quickstart';
```

Fix any circular dependencies by:
1. Ensuring each domain file only imports from other domain files, not index.ts
2. Moving shared types to the most logical domain file

Run full test suite to verify everything works.
  </action>
  <verify>npm test passes, npx tsc --noEmit passes</verify>
  <done>All types extracted, index.ts is re-export only, all tests pass, Phase 19 complete</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npx tsc --noEmit` passes
- [ ] `npm test` passes (all 180+ tests)
- [ ] src/types/providers.ts exists
- [ ] src/types/workflow.ts exists
- [ ] src/types/models.ts exists
- [ ] src/types/api.ts exists
- [ ] index.ts contains only re-exports (no type definitions)
- [ ] No circular dependency errors
</verification>

<success_criteria>
- All tasks completed
- All verification checks pass
- All types organized into 7 domain files (nodes, annotation, providers, workflow, models, api, quickstart)
- index.ts is a pure re-export hub
- Backward compatibility maintained
- Phase 19 complete
</success_criteria>

<output>
After completion, create `.planning/phases/19-type-refactoring/19-02-SUMMARY.md`
</output>
